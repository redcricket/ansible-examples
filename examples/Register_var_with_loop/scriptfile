[1m[7m%[27m[1m[0m                                                                                                                                                                                                           [0m[27m[24m[Jrussellcecala@Russells-MacBook-Pro Register_var_with_loop % [K[?2004hcat three_file.txt[13Dwo[P[P[9C  [12Done[9C[16Dls -l           [11Dansible-playbook -i,localhost make_file.yml --connection=local[62Dls -l                                                         [57Dcat one_file.txt[12Dtwo[9C[11Dhree_file.txt[18D                  [18Dlls -l[?2004l
total 72
-rw-r--r--  1 russellcecala  staff    290 Feb 26 19:37 README.md
-rw-r--r--  1 russellcecala  staff     34 Feb 25 21:46 datafile.txt
-rw-r--r--  1 russellcecala  staff  15665 Feb 26 19:40 junk
-rw-r--r--  1 russellcecala  staff    912 Feb 26 19:21 make_file.yml
-rw-r--r--  1 russellcecala  staff    629 Feb 26 19:43 scriptfile
-rw-r--r--  1 russellcecala  staff     50 Feb 26 19:21 template-file.j2
[1m[7m%[27m[1m[0m                                                                                                                                                                                                           [0m[27m[24m[Jrussellcecala@Russells-MacBook-Pro Register_var_with_loop % [K[?2004hccat datafile.txt[1m [0m[0m [?2004l
1 one a
2 two b
3 three c
4 our d
[1m[7m%[27m[1m[0m                                                                                                                                                                                                           [0m[27m[24m[Jrussellcecala@Russells-MacBook-Pro Register_var_with_loop % [K[?2004hccat template-file.j2[1m [0m[0m [?2004l
Z1 = {{ item.0.stdout }}
Z2 = {{ item.1.stdout }}
[1m[7m%[27m[1m[0m                                                                                                                                                                                                           [0m[27m[24m[Jrussellcecala@Russells-MacBook-Pro Register_var_with_loop % [K[?2004hccat make_file.yml[1m [0m[0m [?2004l
---
- name: Make files
  hosts: localhost
  gather_facts: False
  vars:
    start: 1
    end: 4

  tasks:
  - name: Set word
    shell: |
      grep {{ item }} datafile.txt | cut -d ' ' -f2
    register: word_var
    loop: "{{ range(start, end) | list }}"

  - name: Set letter
    shell: |
      grep {{ item }} datafile.txt | cut -d ' ' -f3
    register: letter_var
    loop: "{{ range(start, end) | list }}"

  - name: with_together -> loop
    ansible.builtin.debug:
      msg: "{{ item.0.stdout }} - {{ item.1.stdout }}"
    loop: "{{ word_var.results|zip(letter_var.results)|list }}"


  - name: create files
    template:
      src: template-file.j2
      dest: "{{ item.0.stdout }}_file.txt"
    loop: "{{ word_var.results|zip(letter_var.results)|list }}"


# - name: with_together -> loop
#   ansible.builtin.debug:
#     msg: "{{ item.0 }} - {{ item.1 }}"
#   loop: "{{ list_one|zip(list_two)|list }}"
[1m[7m%[27m[1m[0m                                                                                                                                                                                                           [0m[27m[24m[Jrussellcecala@Russells-MacBook-Pro Register_var_with_loop % [K[?2004hcat make_file.yml[13Dtemplate-file.j2[16Ddatafile.txt    [16Dls -l           [11Dcat three_file.txt[13Dwo[P[P[9C  [12Done[9C[16Dls -l           [11Dansible-playbook -i,localhost make_file.yml --connection=local[?2004l

PLAY [Make files] *****************************************************************************************************************************************************************************************

TASK [Set word] *******************************************************************************************************************************************************************************************
[0;33mchanged: [localhost] => (item=1)[0m
[0;33mchanged: [localhost] => (item=2)[0m
[0;33mchanged: [localhost] => (item=3)[0m
[1;35m[WARNING]: Platform darwin on host localhost is using the discovered Python interpreter at /usr/bin/python, but future installation of another Python interpreter could change the meaning of that path.[0m
[1;35mSee https://docs.ansible.com/ansible/2.10/reference_appendices/interpreter_discovery.html for more information.[0m

TASK [Set letter] *****************************************************************************************************************************************************************************************
[0;33mchanged: [localhost] => (item=1)[0m
[0;33mchanged: [localhost] => (item=2)[0m
[0;33mchanged: [localhost] => (item=3)[0m

TASK [with_together -> loop] ******************************************************************************************************************************************************************************
[0;32mok: [localhost] => (item=[{'changed': True, 'end': '2022-02-26 19:43:30.747027', 'stdout': 'one', 'cmd': "grep 1 datafile.txt | cut -d ' ' -f2\n", 'rc': 0, 'start': '2022-02-26 19:43:30.740330', 'stderr': '', 'delta': '0:00:00.006697', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 1 datafile.txt | cut -d ' ' -f2\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['one'], 'stderr_lines': [], 'ansible_facts': {'discovered_interpreter_python': '/usr/bin/python'}, 'failed': False, 'item': 1, 'ansible_loop_var': 'item'}, {'changed': True, 'end': '2022-02-26 19:43:31.434951', 'stdout': 'a', 'cmd': "grep 1 datafile.txt | cut -d ' ' -f3\n", 'rc': 0, 'start': '2022-02-26 19:43:31.426668', 'stderr': '', 'delta': '0:00:00.008283', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 1 datafile.txt | cut -d ' ' -f3\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['a'], 'stderr_lines': [], 'failed': False, 'item': 1, 'ansible_loop_var': 'item'}]) => {[0m
[0;32m    "msg": "one - a"[0m
[0;32m}[0m
[0;32mok: [localhost] => (item=[{'changed': True, 'end': '2022-02-26 19:43:30.967349', 'stdout': 'two', 'cmd': "grep 2 datafile.txt | cut -d ' ' -f2\n", 'rc': 0, 'start': '2022-02-26 19:43:30.960710', 'stderr': '', 'delta': '0:00:00.006639', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 2 datafile.txt | cut -d ' ' -f2\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['two'], 'stderr_lines': [], 'failed': False, 'item': 2, 'ansible_loop_var': 'item'}, {'changed': True, 'end': '2022-02-26 19:43:31.652783', 'stdout': 'b', 'cmd': "grep 2 datafile.txt | cut -d ' ' -f3\n", 'rc': 0, 'start': '2022-02-26 19:43:31.645399', 'stderr': '', 'delta': '0:00:00.007384', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 2 datafile.txt | cut -d ' ' -f3\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['b'], 'stderr_lines': [], 'failed': False, 'item': 2, 'ansible_loop_var': 'item'}]) => {[0m
[0;32m    "msg": "two - b"[0m
[0;32m}[0m
[0;32mok: [localhost] => (item=[{'changed': True, 'end': '2022-02-26 19:43:31.188856', 'stdout': 'three', 'cmd': "grep 3 datafile.txt | cut -d ' ' -f2\n", 'rc': 0, 'start': '2022-02-26 19:43:31.181297', 'stderr': '', 'delta': '0:00:00.007559', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 3 datafile.txt | cut -d ' ' -f2\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['three'], 'stderr_lines': [], 'failed': False, 'item': 3, 'ansible_loop_var': 'item'}, {'changed': True, 'end': '2022-02-26 19:43:31.866474', 'stdout': 'c', 'cmd': "grep 3 datafile.txt | cut -d ' ' -f3\n", 'rc': 0, 'start': '2022-02-26 19:43:31.859995', 'stderr': '', 'delta': '0:00:00.006479', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 3 datafile.txt | cut -d ' ' -f3\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['c'], 'stderr_lines': [], 'failed': False, 'item': 3, 'ansible_loop_var': 'item'}]) => {[0m
[0;32m    "msg": "three - c"[0m
[0;32m}[0m

TASK [create files] ***************************************************************************************************************************************************************************************
[0;33mchanged: [localhost] => (item=[{'changed': True, 'end': '2022-02-26 19:43:30.747027', 'stdout': 'one', 'cmd': "grep 1 datafile.txt | cut -d ' ' -f2\n", 'rc': 0, 'start': '2022-02-26 19:43:30.740330', 'stderr': '', 'delta': '0:00:00.006697', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 1 datafile.txt | cut -d ' ' -f2\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['one'], 'stderr_lines': [], 'ansible_facts': {'discovered_interpreter_python': '/usr/bin/python'}, 'failed': False, 'item': 1, 'ansible_loop_var': 'item'}, {'changed': True, 'end': '2022-02-26 19:43:31.434951', 'stdout': 'a', 'cmd': "grep 1 datafile.txt | cut -d ' ' -f3\n", 'rc': 0, 'start': '2022-02-26 19:43:31.426668', 'stderr': '', 'delta': '0:00:00.008283', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 1 datafile.txt | cut -d ' ' -f3\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['a'], 'stderr_lines': [], 'failed': False, 'item': 1, 'ansible_loop_var': 'item'}])[0m
[0;33mchanged: [localhost] => (item=[{'changed': True, 'end': '2022-02-26 19:43:30.967349', 'stdout': 'two', 'cmd': "grep 2 datafile.txt | cut -d ' ' -f2\n", 'rc': 0, 'start': '2022-02-26 19:43:30.960710', 'stderr': '', 'delta': '0:00:00.006639', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 2 datafile.txt | cut -d ' ' -f2\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['two'], 'stderr_lines': [], 'failed': False, 'item': 2, 'ansible_loop_var': 'item'}, {'changed': True, 'end': '2022-02-26 19:43:31.652783', 'stdout': 'b', 'cmd': "grep 2 datafile.txt | cut -d ' ' -f3\n", 'rc': 0, 'start': '2022-02-26 19:43:31.645399', 'stderr': '', 'delta': '0:00:00.007384', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 2 datafile.txt | cut -d ' ' -f3\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['b'], 'stderr_lines': [], 'failed': False, 'item': 2, 'ansible_loop_var': 'item'}])[0m
[0;33mchanged: [localhost] => (item=[{'changed': True, 'end': '2022-02-26 19:43:31.188856', 'stdout': 'three', 'cmd': "grep 3 datafile.txt | cut -d ' ' -f2\n", 'rc': 0, 'start': '2022-02-26 19:43:31.181297', 'stderr': '', 'delta': '0:00:00.007559', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 3 datafile.txt | cut -d ' ' -f2\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['three'], 'stderr_lines': [], 'failed': False, 'item': 3, 'ansible_loop_var': 'item'}, {'changed': True, 'end': '2022-02-26 19:43:31.866474', 'stdout': 'c', 'cmd': "grep 3 datafile.txt | cut -d ' ' -f3\n", 'rc': 0, 'start': '2022-02-26 19:43:31.859995', 'stderr': '', 'delta': '0:00:00.006479', 'invocation': {'module_args': {'creates': None, 'executable': None, '_uses_shell': True, 'strip_empty_ends': True, '_raw_params': "grep 3 datafile.txt | cut -d ' ' -f3\n", 'removes': None, 'argv': None, 'warn': True, 'chdir': None, 'stdin_add_newline': True, 'stdin': None}}, 'stdout_lines': ['c'], 'stderr_lines': [], 'failed': False, 'item': 3, 'ansible_loop_var': 'item'}])[0m

PLAY RECAP ************************************************************************************************************************************************************************************************
[0;33mlocalhost[0m                  : [0;32mok=4   [0m [0;33mchanged=3   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

[1m[7m%[27m[1m[0m                                                                                                                                                                                                           [0m[27m[24m[Jrussellcecala@Russells-MacBook-Pro Register_var_with_loop % [K[?2004hlls -l[?2004l
total 120
-rw-r--r--  1 russellcecala  staff    290 Feb 26 19:37 README.md
-rw-r--r--  1 russellcecala  staff     34 Feb 25 21:46 datafile.txt
-rw-r--r--  1 russellcecala  staff  15665 Feb 26 19:40 junk
-rw-r--r--  1 russellcecala  staff    912 Feb 26 19:21 make_file.yml
-rw-r--r--  1 russellcecala  staff     16 Feb 26 19:43 one_file.txt
-rw-r--r--  1 russellcecala  staff  13664 Feb 26 19:43 scriptfile
-rw-r--r--  1 russellcecala  staff     50 Feb 26 19:21 template-file.j2
-rw-r--r--  1 russellcecala  staff     18 Feb 26 19:43 three_file.txt
-rw-r--r--  1 russellcecala  staff     16 Feb 26 19:43 two_file.txt
[1m[7m%[27m[1m[0m                                                                                                                                                                                                           [0m[27m[24m[Jrussellcecala@Russells-MacBook-Pro Register_var_with_loop % [K[?2004hccat one_file.txt[1m [0m[0m [?2004l
Z1 = one
Z2 = a
[1m[7m%[27m[1m[0m                                                                                                                                                                                                           [0m[27m[24m[Jrussellcecala@Russells-MacBook-Pro Register_var_with_loop % [K[?2004hccat two_file.txt[1m [0m[0m [?2004l
Z1 = two
Z2 = b
[1m[7m%[27m[1m[0m                                                                                                                                                                                                           [0m[27m[24m[Jrussellcecala@Russells-MacBook-Pro Register_var_with_loop % [K[?2004hccat three_file.txt[1m [0m[0m [?2004l
Z1 = three
Z2 = c
[1m[7m%[27m[1m[0m                                                                                                                                                                                                           [0m[27m[24m[Jrussellcecala@Russells-MacBook-Pro Register_var_with_loop % [K[?2004h[?2004l
